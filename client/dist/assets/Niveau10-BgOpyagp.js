const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-DY3eKUkh.js","assets/index-CyZoC0jI.js","assets/index-D2-YU4k6.css"])))=>i.map(i=>d[i]);
import{u as Fe,c as Ue,r as l,s as ze,a as be,p as J,b as he,j as e,l as Ve,d as Be,_ as Oe}from"./index-CyZoC0jI.js";var ye="https://js.stripe.com/v3",Ge=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Ke=function(){for(var s=document.querySelectorAll('script[src^="'.concat(ye,'"]')),c=0;c<s.length;c++){var o=s[c];if(Ge.test(o.src))return o}return null},ge=function(s){var c="",o=document.createElement("script");o.src="".concat(ye).concat(c);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(o),o},We=function(s,c){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:c})},I=null,z=null,V=null,Xe=function(s){return function(){s(new Error("Failed to load Stripe.js"))}},He=function(s,c){return function(){window.Stripe?s(window.Stripe):c(new Error("Stripe.js not available"))}},Je=function(s){return I!==null?I:(I=new Promise(function(c,o){if(typeof window>"u"||typeof document>"u"){c(null);return}if(window.Stripe){c(window.Stripe);return}try{var n=Ke();if(!(n&&s)){if(!n)n=ge(s);else if(n&&V!==null&&z!==null){var i;n.removeEventListener("load",V),n.removeEventListener("error",z),(i=n.parentNode)===null||i===void 0||i.removeChild(n),n=ge(s)}}V=He(c,o),z=Xe(o),n.addEventListener("load",V),n.addEventListener("error",z)}catch(d){o(d);return}}),I.catch(function(c){return I=null,Promise.reject(c)}))},Ye=function(s,c,o){if(s===null)return null;var n=s.apply(void 0,c);return We(n,o),n},$,je=!1,we=function(){return $||($=Je(null).catch(function(s){return $=null,Promise.reject(s)}),$)};Promise.resolve().then(function(){return we()}).catch(function(r){je||console.warn(r)});var Qe=function(){for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];je=!0;var n=Date.now();return we().then(function(i){return Ye(i,c,n)})};let Y=null;async function et(){return Y||(Y=Oe(()=>import("./jspdf.es.min-DY3eKUkh.js"),__vite__mapDeps([0,1,2])).then(r=>r.jsPDF)),Y}const tt=220,Q={success:"bg-emerald-50 border border-emerald-200 text-emerald-700",info:"bg-blue-50 border border-blue-200 text-blue-700",warning:"bg-amber-50 border border-amber-200 text-amber-700",error:"bg-red-50 border border-red-200 text-red-700"},rt=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i,q=[{text:"F√©licitations, tu as d√©j√† atteint les 10 premiers niveaux de Z√©lia, dans ta qu√™te d‚Äôorientation et de connaissance de toi !",durationMs:4200},{text:"Tu fais partie des 0,01% des √©l√®ves qui prennent leur avenir en main, tu peux vraiment te f√©liciter !",durationMs:3600},{text:"Mais ce n‚Äô√©tait qu‚Äôun d√©but, on a encore plein de choses √† t‚Äôapprendre et √† te partager. Pour √ßa, on va encore avoir besoin de toi.",durationMs:4200},{text:"Il faudrait, pour passer √† la version suivante, que tu partages ton profil et tes r√©ussites sur Z√©lia aux personnes qui pourront t‚Äôinscrire sur la version payante de Z√©lia. On va t‚Äôaider pour √ßa bien s√ªr, comme pour le reste.",durationMs:5200},{text:"Ins√®re les mails des personnes concern√©es, nous leur envoyons ton profil MPC - M√©tiers, Personnalit√©, Comp√©tences, en PDF avec les infos de ce qui t‚Äôattend pour la suite : les nouveaux ateliers, les nouvelles fonctionnalit√©s, les rencontres que tu pourras faire, TOUT !",durationMs:6200},{text:"C‚Äôest parti !",durationMs:1600}];function ee(r,s="zelia"){try{if(r!=null&&r.avatar_url&&typeof r.avatar_url=="string")return r.avatar_url;if(r!=null&&r.avatar&&typeof r.avatar=="string")return r.avatar;if(r!=null&&r.avatar_json){let o=r.avatar_json;if(typeof o=="string")try{o=JSON.parse(o)}catch{}if(o&&typeof o=="object"){if(o.url&&typeof o.url=="string")try{const i=new URL(o.url);return i.searchParams.has("seed")||i.searchParams.set("seed",String(s)),i.searchParams.has("size")||i.searchParams.set("size","300"),i.toString()}catch{}const n=new URLSearchParams;return n.set("seed",String(s)),Object.entries(o).forEach(([i,d])=>{d!=null&&d!==""&&n.set(i,String(d))}),n.has("size")||n.set("size","300"),`https://api.dicebear.com/9.x/lorelei/svg?${n.toString()}`}}}catch{}return`https://api.dicebear.com/9.x/lorelei/svg?${new URLSearchParams({seed:String(s),size:"300",radius:"15"}).toString()}`}function ve(r,s={}){try{const c=new URL(r);return/api\.dicebear\.com/.test(c.host)&&/\/lorelei\/svg/.test(c.pathname)?(Object.entries(s).forEach(([n,i])=>{i==null||i===""?c.searchParams.delete(n):c.searchParams.set(n,String(i))}),c.searchParams.has("size")||c.searchParams.set("size","300"),c.toString()):r}catch{return r}}function st(r,s){const[c,o]=l.useState(""),[n,i]=l.useState(!1),d=l.useRef(null),m=l.useRef(null);return l.useEffect(()=>{const h=r||"";o(""),i(!1);let x=0;const f=Math.max(15,Math.floor(s/Math.max(1,h.length)));return d.current=setInterval(()=>{x+=1,o(h.slice(0,x)),x>=h.length&&clearInterval(d.current)},f),m.current=setTimeout(()=>{clearInterval(d.current),o(h),i(!0)},Math.max(s,(h.length+1)*f)),()=>{d.current&&clearInterval(d.current),m.current&&clearTimeout(m.current)}},[r,s]),{text:c,done:n,skip:()=>{d.current&&clearInterval(d.current),m.current&&clearTimeout(m.current),o(r||""),i(!0)}}}function at({firstName:r,benefits:s,price:c}){const o=`Bonjour,

Vous trouverez en pi√®ce jointe le dossier d‚Äôorientation complet de ${r}. Il r√©sume ses avanc√©es sur Z√©lia : m√©tiers, personnalit√© et comp√©tences.`,n=`

Activez Z√©lia+ pour ${r} afin de poursuivre l‚Äôaccompagnement premium.`,i=[`

Ce que Z√©lia+ d√©bloque :`,...s.map(b=>`- ${b.title} : ${b.description}`)].join(`
`),d=`

Activation en un paiement unique de ${c} sur la plateforme s√©curis√©e Stripe.`;return`${o}${n}${i}${d}

√Ä tr√®s vite,
L‚Äô√©quipe Z√©lia`}function nt({firstName:r,benefits:s,price:c}){return`<!DOCTYPE html>
  <html lang="fr">
    <body style="font-family:Arial,Helvetica,sans-serif;color:#111;line-height:1.5;">
      <p>Bonjour,</p>
      <p>Vous trouverez en pi√®ce jointe le dossier d‚Äôorientation complet de <strong>${r}</strong>. Il r√©sume ses avanc√©es sur Z√©lia : m√©tiers, personnalit√© et comp√©tences.</p>
      <p><strong>Activez Z√©lia+ pour ${r}</strong> afin de poursuivre l‚Äôaccompagnement premium.</p>
      <p><strong>Ce que Z√©lia+ d√©bloque :</strong></p>
      <ul>
        ${s.map(o=>`<li><strong>${o.title}</strong> ‚Äì ${o.description}</li>`).join("")}
      </ul>
      ${`<p>Activation en un paiement unique de <strong>${c}</strong> sur la plateforme s√©curis√©e Stripe.</p>`}
      <p>√Ä tr√®s vite,<br/>L‚Äô√©quipe Z√©lia</p>
    </body>
  </html>`}async function it({profile:r,results:s,benefits:c,priceLabel:o}){const n=await et(),i=new n({unit:"pt",format:"a4"}),d=48;let m=d;const b=(x,f=[])=>{f.length&&(i.setFont("helvetica","bold"),i.setFontSize(14),i.text(x,d,m),m+=18,i.setFont("helvetica","normal"),i.setFontSize(11),f.forEach(w=>{i.splitTextToSize(w,515).forEach(N=>{m>770&&(i.addPage(),m=d),i.text(N,d,m),m+=16}),m+=4}),m+=8)},h=r!=null&&r.full_name||r!=null&&r.first_name?`${(r==null?void 0:r.first_name)||""} ${(r==null?void 0:r.last_name)||""}`.trim():"";if(i.setFont("helvetica","bold"),i.setFontSize(20),i.text("Dossier d‚Äôorientation ‚Äì Z√©lia",d,m),m+=28,i.setFont("helvetica","normal"),i.setFontSize(11),h&&(i.text(`√âl√®ve : ${h}`,d,m),m+=16),i.text(`Date : ${new Intl.DateTimeFormat("fr-FR").format(new Date)}`,d,m),m+=22,b("Synth√®se Profils & Analyses",[s!=null&&s.personalityType?`Profil identifi√© : ${s.personalityType}`:null,(s==null?void 0:s.personalityAnalysis)||null,(s==null?void 0:s.skillsAssessment)||null].filter(Boolean)),Array.isArray(s==null?void 0:s.jobRecommendations)&&s.jobRecommendations.length){const x=s.jobRecommendations.map((f,w)=>{const L=Array.isArray(f.skills)&&f.skills.length?`Comp√©tences cl√©s : ${f.skills.join(", ")}`:null;return[`${w+1}. ${f.title}`,L].filter(Boolean).join(" ‚Äî ")});b("M√©tiers recommand√©s",x)}if(Array.isArray(s==null?void 0:s.studyRecommendations)&&s.studyRecommendations.length){const x=s.studyRecommendations.map((f,w)=>`${w+1}. ${f.degree} ‚Äì ${f.type}`);b("Pistes d‚Äô√©tudes",x)}return b(`Activez Z√©lia+ pour ${(r==null?void 0:r.first_name)||h||"l‚Äô√©l√®ve"}`,["Paiement unique pour acc√©der aux niveaux 11 √† 50 et √† toutes les ressources premium.",`Tarif indicatif : ${o}.`].filter(Boolean)),b("Ce que Z√©lia+ d√©bloque",c.map(x=>`${x.title} : ${x.description}`)),i}function ct(){const r=Fe(),[s]=Ue(),[c,o]=l.useState(!0),[n,i]=l.useState(null),[d,m]=l.useState(!1),[b,h]=l.useState(""),[x,f]=l.useState(""),[w,L]=l.useState(!1),[N,C]=l.useState("dialogue"),[R,Ne]=l.useState(0),[B,v]=l.useState(null),[te,A]=l.useState(""),[O,T]=l.useState("idle"),[Z,re]=l.useState(!1),[Se,se]=l.useState(!1),[Pe,_]=l.useState(!1),[G,ae]=l.useState(null),[K,ne]=l.useState(!1),[ie,M]=l.useState(""),[k,oe]=l.useState([]),[le,ce]=l.useState(""),[W,S]=l.useState(""),[de,ue]=l.useState(!1),[g,Ee]=l.useState({publishableKey:null,priceId:null,priceAmount:null,priceCurrency:"eur",productName:"Z√©lia+ ‚Äî Acc√®s complet"}),X=l.useRef(null),H=l.useRef(!1),D=l.useMemo(()=>[{title:"Niveaux 11 √† 20",description:"D√©couvre les univers m√©tiers, rencontre des professionnels et pr√©pare tes immersions."},{title:"Niveaux 21 √† 30",description:"Valorise tes comp√©tences, construis un CV impactant et r√©dige ta lettre de motivation id√©ale."},{title:"Niveaux 31 √† 40",description:"S√©curise Parcoursup, pr√©pare tes oraux et travaille ta posture pour convaincre."},{title:"Niveaux 41 √† 50",description:"Polis chaque d√©tail de ton dossier et passe en mode mentor pour inspirer les autres."}],[]),P=l.useMemo(()=>{if(!(g!=null&&g.priceAmount)||g.priceAmount<=0)return null;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:(g.priceCurrency||"eur").toUpperCase()}).format(g.priceAmount/100)}catch{return`${(g.priceAmount/100).toFixed(2)} ${(g.priceCurrency||"EUR").toUpperCase()}`}},[g.priceAmount,g.priceCurrency])||"24,99¬†‚Ç¨",F=l.useMemo(()=>n?n.first_name?n.first_name:n.full_name?n.full_name.split(" ")[0]:"ton enfant":"ton enfant",[n]),E=q[Math.min(R,q.length-1)],{text:Ce,done:me,skip:Ae}=st((E==null?void 0:E.text)||"",(E==null?void 0:E.durationMs)||2e3),U=N==="dialogue"&&!me;l.useEffect(()=>{if(!U)return;const t=setInterval(()=>L(a=>!a),200);return()=>clearInterval(t)},[U]),l.useEffect(()=>{o(!0);let t=!1;return(async()=>{var a;try{const{data:{user:u}}=await ze.auth.getUser();if(!u){r("/login");return}h(u.id);const p=await be.getProfile().catch(()=>null);if(t)return;const y=((a=p==null?void 0:p.data)==null?void 0:a.profile)||(p==null?void 0:p.data)||null;i(y);const j=!!(y!=null&&y.has_paid);m(j),f(ee(y,u.id)),j&&C("payment")}catch(u){console.error("Niveau10 profile load error",u),t||A("Impossible de charger ton profil. R√©essaie plus tard.")}finally{t||o(!1)}})(),()=>{t=!0}},[r]),l.useEffect(()=>{let t=!1;return(async()=>{try{const{data:a}=await J.getConfig().catch(()=>({data:{}}));if(t)return;Ee({publishableKey:(a==null?void 0:a.publishableKey)||null,priceId:(a==null?void 0:a.priceId)||null,priceAmount:typeof(a==null?void 0:a.priceAmount)=="number"?a.priceAmount:null,priceCurrency:(a==null?void 0:a.priceCurrency)||"eur",productName:(a==null?void 0:a.productName)||"Z√©lia+ ‚Äî Acc√®s complet"}),a!=null&&a.publishableKey&&(X.current=Qe(a.publishableKey))}catch(a){console.error("Stripe config load failed",a),t||v({tone:"warning",text:"Stripe n'est pas encore configur√©. Ajoute tes cl√©s dans les variables d'environnement pour activer le paiement."})}})(),()=>{t=!0}},[]),l.useEffect(()=>{const t=s.get("checkout");t==="cancelled"?v({tone:"info",text:"Paiement annul√©. Tu peux r√©essayer quand tu seras pr√™t(e)."}):t==="success"&&v({tone:"info",text:"Merci ! V√©rification de ton paiement en cours‚Ä¶"})},[s]),l.useEffect(()=>{if(!n)return;const t=b||(n==null?void 0:n.id)||"zelia";f(ee(n,t))},[n,b]),l.useEffect(()=>{const t=s.get("session_id");!t||H.current||(H.current=!0,T("verifying"),v({tone:"info",text:"Nous v√©rifions la confirmation de ton paiement‚Ä¶"}),(async()=>{try{const{data:a}=await J.verifySession(t);a!=null&&a.paid?(m(!0),C("payment"),v({tone:"success",text:"Paiement confirm√© ! Z√©lia+ est d√©sormais activ√©."}),_(!0),await ke()):v({tone:"warning",text:"Paiement en attente ou incomplet. Si le d√©bit appara√Æt, contacte-nous."})}catch(a){console.error("Payment verification failed",a),v({tone:"error",text:"Impossible de v√©rifier le paiement. Contacte le support si besoin."})}finally{H.current=!1,T("idle")}})())},[s]);const ke=l.useCallback(async()=>{var t;try{const a=await be.getProfile().catch(()=>null),u=((t=a==null?void 0:a.data)==null?void 0:t.profile)||(a==null?void 0:a.data)||null;i(u),m(!!(u!=null&&u.has_paid)),f(ee(u,b||"zelia"))}catch(a){console.warn("Unable to refresh profile after payment",a)}},[b]),Ie=l.useCallback(async()=>{var a,u;if(G)return G;if(K)return null;ne(!0),M("");const t=async()=>(await he.get("/analysis/my-results",{headers:{"Cache-Control":"no-cache"},params:{_:Date.now()}})).data.results;try{const p=await t();return ae(p),p}catch(p){if(((a=p.response)==null?void 0:a.status)===404){const y=b||(n==null?void 0:n.id);if(y)try{await he.post("/analysis/generate-analysis",{userId:y});const j=await t();return ae(j),j}catch(j){console.error("Generation fallback failed",j),M("Impossible de r√©cup√©rer tes r√©sultats pour le moment. V√©rifie que tu as compl√©t√© ton analyse.")}}else((u=p.response)==null?void 0:u.status)===401?M("Session expir√©e. Recharge la page et reconnecte-toi pour partager tes r√©sultats."):(console.error("Analysis fetch failed",p),M("Erreur lors du chargement des r√©sultats. R√©essaie dans un instant."))}finally{ne(!1)}return null},[G,K,n==null?void 0:n.id,b]),$e=()=>{if(!me){Ae();return}R+1<q.length?(Ne(t=>t+1),R+1===q.length-1&&C("share")):C("share")},pe=()=>{const t=le.trim();if(t){if(!rt.test(t)){S("Adresse e-mail invalide.");return}if(k.includes(t.toLowerCase())){S("Cette adresse est d√©j√† ajout√©e.");return}oe(a=>[...a,t.toLowerCase()]),ce(""),S("")}},qe=t=>{oe(a=>a.filter(u=>u!==t))},Le=async()=>{var t,a;if(S(""),!k.length){S("Ajoute au moins une adresse e-mail.");return}ue(!0);try{const u=await Ie();if(!u)throw new Error("R√©sultats indisponibles");const j=(await it({profile:n,results:u,benefits:D,priceLabel:P})).output("datauristring").split(",")[1],Me=`resultats-orientation-${F.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.pdf`,De={recipients:k,subject:`Voici les r√©sultats d'orientation de ${F}`,text:at({firstName:F,benefits:D,price:P}),html:nt({firstName:F,benefits:D,price:P}),attachment:{filename:Me,content:j}};await Be.sendResults(De),v({tone:"success",text:"E-mail envoy√© ! Tu peux maintenant activer Z√©lia+."}),C("payment")}catch(u){console.error("Share results failed",u);const p=((a=(t=u.response)==null?void 0:t.data)==null?void 0:a.error)||u.message||"Impossible d‚Äôenvoyer les r√©sultats.";S(p)}finally{ue(!1)}},Re=async()=>{A(""),v(null),T("processing");try{const{data:t}=await J.createCheckout(),a=t==null?void 0:t.sessionId;if(!a)throw new Error("Missing session id");const u=X.current?await X.current:null;if(u){const{error:p}=await u.redirectToCheckout({sessionId:a});if(p){if(console.warn("Stripe redirect error",p),t!=null&&t.url){window.location.href=t.url;return}throw p}}else if(t!=null&&t.url)window.location.href=t.url;else throw new Error("Stripe non initialis√©")}catch(t){console.error("Checkout initiation failed",t),A("Impossible de lancer le paiement. Merci de r√©essayer dans quelques instants."),T("idle")}},xe=async()=>{re(!0),A("");try{await Ve({minLevel:10,xpReward:tt}),se(!0)}catch(t){console.error("Level up failed",t),A("Impossible de valider le niveau. R√©essaie dans un instant.")}finally{re(!1)}},fe=l.useMemo(()=>x&&(N==="dialogue"&&U?ve(x,{mouth:w?"happy08":"happy01"}):ve(x,{mouth:null})),[x,w,N,U]);if(c)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-black border-t-transparent"}),e.jsx("p",{className:"mt-2 text-text-secondary",children:"Chargement du niveau‚Ä¶"})]});const Te=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 md:flex-row md:items-start",children:[e.jsx("img",{src:fe||"/static/images/logo-dark.png",alt:"Avatar",className:"mx-auto h-48 w-48 rounded-3xl border border-gray-100 bg-white object-contain shadow-sm md:h-64 md:w-64"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative w-full rounded-2xl bg-black px-5 py-4 text-white md:px-6 md:py-5",children:[e.jsx("p",{className:"min-h-[3.5rem] whitespace-pre-wrap text-base leading-relaxed md:text-lg",children:Ce}),e.jsx("div",{className:"absolute -left-2 top-6 h-0 w-0 border-b-8 border-r-8 border-t-8 border-b-transparent border-r-black border-t-transparent"})]}),e.jsx("button",{type:"button",onClick:$e,className:"mt-4 inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d]",children:R===q.length-1?"Compris !":"Suivant"})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 text-sm shadow-card md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ce qu‚Äôon va faire juste avant le paiement"}),e.jsx("p",{className:"mt-3 text-gray-600",children:"Tu viens d‚Äôatteindre un jalon cl√©. Avant d‚Äôactiver Z√©lia+, on t‚Äôaide √† partager tes r√©ussites aupr√®s des personnes qui peuvent valider ton acc√®s (parents, tuteur, r√©f√©rent √©ducatif‚Ä¶)."}),e.jsx("p",{className:"mt-3 text-gray-600",children:"√Ä la fin du dialogue, tu pourras saisir leurs e-mails pour leur transmettre ton dossier complet (M√©tiers, Personnalit√©, Comp√©tences) en PDF."}),e.jsx("p",{className:"mt-3 text-gray-600",children:"Ensuite seulement, tu activeras Z√©lia+ et acc√©deras aux niveaux 11 √† 50 avec toutes les fonctionnalit√©s premium."})]})]})}),Ze=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 md:flex-row md:items-start",children:[e.jsx("img",{src:fe||"/static/images/logo-dark.png",alt:"Avatar",className:"mx-auto h-48 w-48 rounded-3xl border border-gray-100 bg-white object-contain shadow-sm md:h-64 md:w-64"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative w-full rounded-2xl bg-black px-5 py-4 text-white md:px-6 md:py-5",children:[e.jsx("p",{className:"min-h-[3.5rem] whitespace-pre-wrap text-base leading-relaxed md:text-lg",children:"Ins√®re les e-mails des personnes qui peuvent te donner acc√®s √† Z√©lia+. On leur envoie ton dossier en PDF."}),e.jsx("div",{className:"absolute -left-2 top-6 h-0 w-0 border-b-8 border-r-8 border-t-8 border-b-transparent border-r-black border-t-transparent"})]}),e.jsxs("div",{className:"mt-4 rounded-2xl border border-dashed border-gray-300 bg-gray-50 p-4 text-sm text-gray-600",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Contenu du dossier :"}),e.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-5",children:[e.jsx("li",{children:"R√©sultats M√©tiers, Personnalit√©, Comp√©tences (format MPC)"}),e.jsx("li",{children:"Recommandations personnalis√©es et prochaines √©tapes"}),e.jsx("li",{children:"Pr√©sentation de Z√©lia+ et de tout ce que tu vas d√©bloquer"})]})]})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Partager mes r√©sultats"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Entre les adresses e-mail des parents, tuteurs ou r√©f√©rents qui doivent valider ton acc√®s √† Z√©lia+."}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 sm:flex-row",children:[e.jsx("input",{type:"email",value:le,onChange:t=>{ce(t.target.value),W&&S("")},onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),pe())},placeholder:"parent@example.com",className:"w-full rounded-xl border border-gray-300 px-4 py-3 text-sm focus:border-black focus:outline-none focus:ring-2 focus:ring-black/10"}),e.jsx("button",{type:"button",onClick:pe,className:"inline-flex items-center justify-center rounded-xl bg-black px-5 py-3 text-sm font-semibold text-white transition hover:bg-gray-900",children:"Ajouter"})]}),k.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:k.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-gray-900/10 px-3 py-1 text-sm text-gray-800",children:[t,e.jsx("button",{type:"button",onClick:()=>qe(t),className:"text-gray-500 transition hover:text-gray-800",children:"√ó"})]},t))}),ie&&e.jsx("div",{className:"mt-4 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:ie}),W&&e.jsx("div",{className:"mt-4 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:W}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("button",{type:"button",onClick:Le,disabled:de||K,className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:de?"Envoi en cours‚Ä¶":"Envoyer mon dossier"}),e.jsx("button",{type:"button",onClick:()=>r("/app/activites"),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Retour aux activit√©s"})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Nous utilisons uniquement ces e-mails pour envoyer le PDF r√©capitulatif de tes r√©sultats et pr√©senter Z√©lia+. Aucun compte ne sera cr√©√© sans leur accord."})]})]})}),_e=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto grid max-w-5xl grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm font-semibold uppercase tracking-wider text-gray-500",children:[e.jsx("span",{className:"inline-flex h-6 min-w-[2rem] items-center justify-center rounded-full bg-black px-2 text-xs font-bold text-white",children:"Niv. 10"}),"Z√©lia+"]}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Active Z√©lia+ pour d√©bloquer la suite"}),e.jsxs("p",{className:"text-lg text-gray-600",children:["Ce niveau d√©bloque toutes les ressources premium et les niveaux 11 √† 50. Un paiement unique de ",P," via Stripe te donne un acc√®s imm√©diat, en toute s√©curit√©."]})]}),B&&e.jsx("div",{className:`mt-4 rounded-2xl px-4 py-3 text-sm ${Q[B.tone]||Q.info}`,children:B.text}),te&&e.jsx("div",{className:`mt-4 rounded-2xl px-4 py-3 text-sm ${Q.error}`,children:te}),!d&&e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-300 bg-gray-50 p-4 text-sm text-gray-600",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Ce que tu obtiens :"}),e.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4",children:[e.jsx("li",{children:"Acc√®s imm√©diat aux niveaux 11 √† 50"}),e.jsx("li",{children:"Ateliers premium (CV, lettre, Parcoursup, oraux)"}),e.jsx("li",{children:"Support prioritaire et mises √† jour exclusives"})]}),e.jsxs("p",{className:"mt-3 text-sm text-gray-500",children:["Tarif : ",P," (paiement unique). Le r√©capitulatif complet est affich√© sur la page Stripe s√©curis√©e."]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("button",{type:"button",onClick:Re,disabled:O!=="idle",className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:O==="processing"?"Redirection en cours‚Ä¶":O==="verifying"?"V√©rification‚Ä¶":`Activer Z√©lia+ ‚Äî ${P}`}),e.jsx("button",{type:"button",onClick:()=>r("/app/activites"),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Retour aux activit√©s"})]}),e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-400"}),"Paiement 100% s√©curis√© via Stripe. Les donn√©es bancaires ne transitent jamais par Z√©lia."]})]}),d&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:"Bravo ! Z√©lia+ est actif. Tu peux maintenant valider ce niveau et poursuivre ton parcours."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("button",{type:"button",onClick:xe,disabled:Z,className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:Z?"Validation‚Ä¶":"Valider le niveau 10"}),e.jsx("button",{type:"button",onClick:()=>r("/app/activites"),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Retour aux activit√©s"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Une fois valid√©, tu pourras acc√©der directement au niveau 11 depuis la page Activit√©s."})]})]}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ce que Z√©lia+ d√©bloque"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ton parcours devient complet et guid√© jusqu‚Äôaux derniers niveaux."}),e.jsx("ul",{className:"mt-6 space-y-3",children:D.map(t=>e.jsxs("li",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]},t.title))}),e.jsxs("div",{className:"mt-6 rounded-2xl border border-dashed border-gray-300 p-4 text-sm text-gray-500",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Besoin d‚Äôaide ?"}),e.jsxs("p",{className:"mt-1",children:["√âcris-nous via le chat ou par e-mail : ",e.jsx("a",{className:"font-medium text-gray-900 underline",href:"mailto:support@zelia.io",children:"support@zelia.io"}),"."]})]})]})]})});return e.jsxs(e.Fragment,{children:[N==="dialogue"&&Te(),N==="share"&&Ze(),N==="payment"&&_e(),Pe&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",children:e.jsxs("div",{className:"relative w-full max-w-lg rounded-3xl border border-gray-200 bg-white p-8 text-center shadow-2xl",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),className:"absolute right-4 top-4 text-gray-400 transition hover:text-gray-600","aria-label":"Fermer l'animation",children:e.jsx("span",{className:"text-2xl",children:"√ó"})}),e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 flex h-12 w-12 items-center justify-center rounded-full bg-[#c1ff72] text-2xl shadow-lg animate-bounce",children:"üéâ"}),e.jsx("img",{src:x||"/assets/images/logo-dark.png",alt:"Avatar Z√©lia",className:"mx-auto mt-6 h-32 w-32 rounded-2xl border border-gray-100 bg-white object-contain shadow-md"}),e.jsx("h3",{className:"mt-6 text-2xl font-extrabold text-gray-900",children:"Merci pour le paiement !"}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:"Merci pour ta confiance, on va pouvoir passer au niveau 11 ensemble."}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center",children:[e.jsx("button",{type:"button",onClick:()=>{_(!1),xe()},disabled:Z,className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:Z?"Validation‚Ä¶":"Valider le niveau 10"}),e.jsx("button",{type:"button",onClick:()=>_(!1),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Plus tard"})]}),e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute left-6 top-8 h-2 w-2 animate-ping rounded-full bg-[#f68fff]"}),e.jsx("div",{className:"absolute right-8 top-10 h-2 w-2 animate-ping rounded-full bg-[#c1ff72]"}),e.jsx("div",{className:"absolute left-10 bottom-8 h-2 w-2 animate-ping rounded-full bg-[#8cd3ff]"}),e.jsx("div",{className:"absolute right-6 bottom-10 h-2 w-2 animate-ping rounded-full bg-[#f8c572]"})]})]})}),Se&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",children:e.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-gray-200 bg-white p-8 text-center shadow-2xl",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 flex h-12 w-12 items-center justify-center rounded-full bg-[#c1ff72] text-2xl shadow-lg",children:"üöÄ"}),e.jsx("h3",{className:"mt-4 text-2xl font-extrabold text-gray-900",children:"Niveau 10 valid√© !"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Tu peux maintenant passer au niveau 11 et poursuivre ton parcours premium."}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center",children:[e.jsx("button",{type:"button",onClick:()=>r("/app/activites"),className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d]",children:"Voir mes activit√©s"}),e.jsx("button",{type:"button",onClick:()=>se(!1),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Rester ici"})]})]})})]})}export{ct as default};
