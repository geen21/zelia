import{u as Ue,c as ze,r as o,s as Fe,a as fe,p as Y,b as be,j as e,l as _e,d as Ve,E as Be}from"./index-C3BZ17kn.js";var ve="https://js.stripe.com/v3",Oe=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Ge=function(){for(var s=document.querySelectorAll('script[src^="'.concat(ve,'"]')),l=0;l<s.length;l++){var i=s[l];if(Oe.test(i.src))return i}return null},he=function(s){var l="",i=document.createElement("script");i.src="".concat(ve).concat(l);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(i),i},Ke=function(s,l){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:l})},I=null,F=null,_=null,We=function(s){return function(){s(new Error("Failed to load Stripe.js"))}},Xe=function(s,l){return function(){window.Stripe?s(window.Stripe):l(new Error("Stripe.js not available"))}},He=function(s){return I!==null?I:(I=new Promise(function(l,i){if(typeof window>"u"||typeof document>"u"){l(null);return}if(window.Stripe){l(window.Stripe);return}try{var t=Ge();if(!(t&&s)){if(!t)t=he(s);else if(t&&_!==null&&F!==null){var c;t.removeEventListener("load",_),t.removeEventListener("error",F),(c=t.parentNode)===null||c===void 0||c.removeChild(t),t=he(s)}}_=Xe(l,i),F=We(i),t.addEventListener("load",_),t.addEventListener("error",F)}catch(d){i(d);return}}),I.catch(function(l){return I=null,Promise.reject(l)}))},Ye=function(s,l,i){if(s===null)return null;var t=s.apply(void 0,l);return Ke(t,i),t},$,ye=!1,je=function(){return $||($=He(null).catch(function(s){return $=null,Promise.reject(s)}),$)};Promise.resolve().then(function(){return je()}).catch(function(a){ye||console.warn(a)});var Je=function(){for(var s=arguments.length,l=new Array(s),i=0;i<s;i++)l[i]=arguments[i];ye=!0;var t=Date.now();return je().then(function(c){return Ye(c,l,t)})};const Qe=220,J={success:"bg-emerald-50 border border-emerald-200 text-emerald-700",info:"bg-blue-50 border border-blue-200 text-blue-700",warning:"bg-amber-50 border border-amber-200 text-amber-700",error:"bg-red-50 border border-red-200 text-red-700"},et=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i,q=[{text:"F√©licitations, tu as d√©j√† atteint les 10 premiers niveaux de Z√©lia, dans ta qu√™te d‚Äôorientation et de connaissance de toi !",durationMs:4200},{text:"Tu fais partie des 0,01% des √©l√®ves qui prennent leur avenir en main, tu peux vraiment te f√©liciter !",durationMs:3600},{text:"Mais ce n‚Äô√©tait qu‚Äôun d√©but, on a encore plein de choses √† t‚Äôapprendre et √† te partager. Pour √ßa, on va encore avoir besoin de toi.",durationMs:4200},{text:"Il faudrait, pour passer √† la version suivante, que tu partages ton profil et tes r√©ussites sur Z√©lia aux personnes qui pourront t‚Äôinscrire sur la version payante de Z√©lia. On va t‚Äôaider pour √ßa bien s√ªr, comme pour le reste.",durationMs:5200},{text:"Ins√®re les mails des personnes concern√©es, nous leur envoyons ton profil MPC - M√©tiers, Personnalit√©, Comp√©tences, en PDF avec les infos de ce qui t‚Äôattend pour la suite : les nouveaux ateliers, les nouvelles fonctionnalit√©s, les rencontres que tu pourras faire, TOUT !",durationMs:6200},{text:"C‚Äôest parti !",durationMs:1600}];function Q(a,s="zelia"){try{if(a!=null&&a.avatar_url&&typeof a.avatar_url=="string")return a.avatar_url;if(a!=null&&a.avatar&&typeof a.avatar=="string")return a.avatar;if(a!=null&&a.avatar_json){let i=a.avatar_json;if(typeof i=="string")try{i=JSON.parse(i)}catch{}if(i&&typeof i=="object"){if(i.url&&typeof i.url=="string")try{const c=new URL(i.url);return c.searchParams.has("seed")||c.searchParams.set("seed",String(s)),c.searchParams.has("size")||c.searchParams.set("size","300"),c.toString()}catch{}const t=new URLSearchParams;return t.set("seed",String(s)),Object.entries(i).forEach(([c,d])=>{d!=null&&d!==""&&t.set(c,String(d))}),t.has("size")||t.set("size","300"),`https://api.dicebear.com/9.x/lorelei/svg?${t.toString()}`}}}catch{}return`https://api.dicebear.com/9.x/lorelei/svg?${new URLSearchParams({seed:String(s),size:"300",radius:"15"}).toString()}`}function ge(a,s={}){try{const l=new URL(a);return/api\.dicebear\.com/.test(l.host)&&/\/lorelei\/svg/.test(l.pathname)?(Object.entries(s).forEach(([t,c])=>{c==null||c===""?l.searchParams.delete(t):l.searchParams.set(t,String(c))}),l.searchParams.has("size")||l.searchParams.set("size","300"),l.toString()):a}catch{return a}}function tt(a,s){const[l,i]=o.useState(""),[t,c]=o.useState(!1),d=o.useRef(null),x=o.useRef(null);return o.useEffect(()=>{const f=a||"";i(""),c(!1);let m=0;const h=Math.max(15,Math.floor(s/Math.max(1,f.length)));return d.current=setInterval(()=>{m+=1,i(f.slice(0,m)),m>=f.length&&clearInterval(d.current)},h),x.current=setTimeout(()=>{clearInterval(d.current),i(f),c(!0)},Math.max(s,(f.length+1)*h)),()=>{d.current&&clearInterval(d.current),x.current&&clearTimeout(x.current)}},[a,s]),{text:l,done:t,skip:()=>{d.current&&clearInterval(d.current),x.current&&clearTimeout(x.current),i(a||""),c(!0)}}}function rt({firstName:a,benefits:s,price:l}){const i=`Bonjour,

Vous trouverez en pi√®ce jointe le dossier d‚Äôorientation complet de ${a}. Il r√©sume ses avanc√©es sur Z√©lia : m√©tiers, personnalit√© et comp√©tences.`,t=`

Activez Z√©lia+ pour ${a} afin de poursuivre l‚Äôaccompagnement premium.`,c=[`

Ce que Z√©lia+ d√©bloque :`,...s.map(b=>`- ${b.title} : ${b.description}`)].join(`
`),d=`

Activation en un paiement unique de ${l} sur la plateforme s√©curis√©e Stripe.`;return`${i}${t}${c}${d}

√Ä tr√®s vite,
L‚Äô√©quipe Z√©lia`}function st({firstName:a,benefits:s,price:l}){return`<!DOCTYPE html>
  <html lang="fr">
    <body style="font-family:Arial,Helvetica,sans-serif;color:#111;line-height:1.5;">
      <p>Bonjour,</p>
      <p>Vous trouverez en pi√®ce jointe le dossier d‚Äôorientation complet de <strong>${a}</strong>. Il r√©sume ses avanc√©es sur Z√©lia : m√©tiers, personnalit√© et comp√©tences.</p>
      <p><strong>Activez Z√©lia+ pour ${a}</strong> afin de poursuivre l‚Äôaccompagnement premium.</p>
      <p><strong>Ce que Z√©lia+ d√©bloque :</strong></p>
      <ul>
        ${s.map(i=>`<li><strong>${i.title}</strong> ‚Äì ${i.description}</li>`).join("")}
      </ul>
      ${`<p>Activation en un paiement unique de <strong>${l}</strong> sur la plateforme s√©curis√©e Stripe.</p>`}
      <p>√Ä tr√®s vite,<br/>L‚Äô√©quipe Z√©lia</p>
    </body>
  </html>`}function at({profile:a,results:s,benefits:l,priceLabel:i}){const t=new Be({unit:"pt",format:"a4"}),c=48;let d=c;const x=(f,m=[])=>{m.length&&(t.setFont("helvetica","bold"),t.setFontSize(14),t.text(f,c,d),d+=18,t.setFont("helvetica","normal"),t.setFontSize(11),m.forEach(h=>{t.splitTextToSize(h,515).forEach(V=>{d>770&&(t.addPage(),d=c),t.text(V,c,d),d+=16}),d+=4}),d+=8)},b=a!=null&&a.full_name||a!=null&&a.first_name?`${(a==null?void 0:a.first_name)||""} ${(a==null?void 0:a.last_name)||""}`.trim():"";if(t.setFont("helvetica","bold"),t.setFontSize(20),t.text("Dossier d‚Äôorientation ‚Äì Z√©lia",c,d),d+=28,t.setFont("helvetica","normal"),t.setFontSize(11),b&&(t.text(`√âl√®ve : ${b}`,c,d),d+=16),t.text(`Date : ${new Intl.DateTimeFormat("fr-FR").format(new Date)}`,c,d),d+=22,x("Synth√®se Profils & Analyses",[s!=null&&s.personalityType?`Profil identifi√© : ${s.personalityType}`:null,(s==null?void 0:s.personalityAnalysis)||null,(s==null?void 0:s.skillsAssessment)||null].filter(Boolean)),Array.isArray(s==null?void 0:s.jobRecommendations)&&s.jobRecommendations.length){const f=s.jobRecommendations.map((m,h)=>{const C=Array.isArray(m.skills)&&m.skills.length?`Comp√©tences cl√©s : ${m.skills.join(", ")}`:null;return[`${h+1}. ${m.title}`,C].filter(Boolean).join(" ‚Äî ")});x("M√©tiers recommand√©s",f)}if(Array.isArray(s==null?void 0:s.studyRecommendations)&&s.studyRecommendations.length){const f=s.studyRecommendations.map((m,h)=>`${h+1}. ${m.degree} ‚Äì ${m.type}`);x("Pistes d‚Äô√©tudes",f)}return x(`Activez Z√©lia+ pour ${(a==null?void 0:a.first_name)||b||"l‚Äô√©l√®ve"}`,["Paiement unique pour acc√©der aux niveaux 11 √† 50 et √† toutes les ressources premium.",`Tarif indicatif : ${i}.`].filter(Boolean)),x("Ce que Z√©lia+ d√©bloque",l.map(f=>`${f.title} : ${f.description}`)),t}function ot(){const a=Ue(),[s]=ze(),[l,i]=o.useState(!0),[t,c]=o.useState(null),[d,x]=o.useState(!1),[b,f]=o.useState(""),[m,h]=o.useState(""),[C,V]=o.useState(!1),[N,E]=o.useState("dialogue"),[L,we]=o.useState(0),[B,v]=o.useState(null),[ee,A]=o.useState(""),[O,R]=o.useState("idle"),[T,te]=o.useState(!1),[Ne,re]=o.useState(!1),[Se,Z]=o.useState(!1),[G,se]=o.useState(null),[K,ae]=o.useState(!1),[ne,M]=o.useState(""),[k,ie]=o.useState([]),[oe,le]=o.useState(""),[W,w]=o.useState(""),[ce,de]=o.useState(!1),[g,Pe]=o.useState({publishableKey:null,priceId:null,priceAmount:null,priceCurrency:"eur",productName:"Z√©lia+ ‚Äî Acc√®s complet"}),X=o.useRef(null),H=o.useRef(!1),D=o.useMemo(()=>[{title:"Niveaux 11 √† 20",description:"D√©couvre les univers m√©tiers, rencontre des professionnels et pr√©pare tes immersions."},{title:"Niveaux 21 √† 30",description:"Valorise tes comp√©tences, construis un CV impactant et r√©dige ta lettre de motivation id√©ale."},{title:"Niveaux 31 √† 40",description:"S√©curise Parcoursup, pr√©pare tes oraux et travaille ta posture pour convaincre."},{title:"Niveaux 41 √† 50",description:"Polis chaque d√©tail de ton dossier et passe en mode mentor pour inspirer les autres."}],[]),S=o.useMemo(()=>{if(!(g!=null&&g.priceAmount)||g.priceAmount<=0)return null;try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:(g.priceCurrency||"eur").toUpperCase()}).format(g.priceAmount/100)}catch{return`${(g.priceAmount/100).toFixed(2)} ${(g.priceCurrency||"EUR").toUpperCase()}`}},[g.priceAmount,g.priceCurrency])||"24,99¬†‚Ç¨",U=o.useMemo(()=>t?t.first_name?t.first_name:t.full_name?t.full_name.split(" ")[0]:"ton enfant":"ton enfant",[t]),P=q[Math.min(L,q.length-1)],{text:Ce,done:ue,skip:Ee}=tt((P==null?void 0:P.text)||"",(P==null?void 0:P.durationMs)||2e3),z=N==="dialogue"&&!ue;o.useEffect(()=>{if(!z)return;const r=setInterval(()=>V(n=>!n),200);return()=>clearInterval(r)},[z]),o.useEffect(()=>{i(!0);let r=!1;return(async()=>{var n;try{const{data:{user:u}}=await Fe.auth.getUser();if(!u){a("/login");return}f(u.id);const p=await fe.getProfile().catch(()=>null);if(r)return;const y=((n=p==null?void 0:p.data)==null?void 0:n.profile)||(p==null?void 0:p.data)||null;c(y);const j=!!(y!=null&&y.has_paid);x(j),h(Q(y,u.id)),j&&E("payment")}catch(u){console.error("Niveau10 profile load error",u),r||A("Impossible de charger ton profil. R√©essaie plus tard.")}finally{r||i(!1)}})(),()=>{r=!0}},[a]),o.useEffect(()=>{let r=!1;return(async()=>{try{const{data:n}=await Y.getConfig().catch(()=>({data:{}}));if(r)return;Pe({publishableKey:(n==null?void 0:n.publishableKey)||null,priceId:(n==null?void 0:n.priceId)||null,priceAmount:typeof(n==null?void 0:n.priceAmount)=="number"?n.priceAmount:null,priceCurrency:(n==null?void 0:n.priceCurrency)||"eur",productName:(n==null?void 0:n.productName)||"Z√©lia+ ‚Äî Acc√®s complet"}),n!=null&&n.publishableKey&&(X.current=Je(n.publishableKey))}catch(n){console.error("Stripe config load failed",n),r||v({tone:"warning",text:"Stripe n'est pas encore configur√©. Ajoute tes cl√©s dans les variables d'environnement pour activer le paiement."})}})(),()=>{r=!0}},[]),o.useEffect(()=>{const r=s.get("checkout");r==="cancelled"?v({tone:"info",text:"Paiement annul√©. Tu peux r√©essayer quand tu seras pr√™t(e)."}):r==="success"&&v({tone:"info",text:"Merci ! V√©rification de ton paiement en cours‚Ä¶"})},[s]),o.useEffect(()=>{if(!t)return;const r=b||(t==null?void 0:t.id)||"zelia";h(Q(t,r))},[t,b]),o.useEffect(()=>{const r=s.get("session_id");!r||H.current||(H.current=!0,R("verifying"),v({tone:"info",text:"Nous v√©rifions la confirmation de ton paiement‚Ä¶"}),(async()=>{try{const{data:n}=await Y.verifySession(r);n!=null&&n.paid?(x(!0),E("payment"),v({tone:"success",text:"Paiement confirm√© ! Z√©lia+ est d√©sormais activ√©."}),Z(!0),await Ae()):v({tone:"warning",text:"Paiement en attente ou incomplet. Si le d√©bit appara√Æt, contacte-nous."})}catch(n){console.error("Payment verification failed",n),v({tone:"error",text:"Impossible de v√©rifier le paiement. Contacte le support si besoin."})}finally{H.current=!1,R("idle")}})())},[s]);const Ae=o.useCallback(async()=>{var r;try{const n=await fe.getProfile().catch(()=>null),u=((r=n==null?void 0:n.data)==null?void 0:r.profile)||(n==null?void 0:n.data)||null;c(u),x(!!(u!=null&&u.has_paid)),h(Q(u,b||"zelia"))}catch(n){console.warn("Unable to refresh profile after payment",n)}},[b]),ke=o.useCallback(async()=>{var n,u;if(G)return G;if(K)return null;ae(!0),M("");const r=async()=>(await be.get("/analysis/my-results",{headers:{"Cache-Control":"no-cache"},params:{_:Date.now()}})).data.results;try{const p=await r();return se(p),p}catch(p){if(((n=p.response)==null?void 0:n.status)===404){const y=b||(t==null?void 0:t.id);if(y)try{await be.post("/analysis/generate-analysis",{userId:y});const j=await r();return se(j),j}catch(j){console.error("Generation fallback failed",j),M("Impossible de r√©cup√©rer tes r√©sultats pour le moment. V√©rifie que tu as compl√©t√© ton analyse.")}}else((u=p.response)==null?void 0:u.status)===401?M("Session expir√©e. Recharge la page et reconnecte-toi pour partager tes r√©sultats."):(console.error("Analysis fetch failed",p),M("Erreur lors du chargement des r√©sultats. R√©essaie dans un instant."))}finally{ae(!1)}return null},[G,K,t==null?void 0:t.id,b]),Ie=()=>{if(!ue){Ee();return}L+1<q.length?(we(r=>r+1),L+1===q.length-1&&E("share")):E("share")},me=()=>{const r=oe.trim();if(r){if(!et.test(r)){w("Adresse e-mail invalide.");return}if(k.includes(r.toLowerCase())){w("Cette adresse est d√©j√† ajout√©e.");return}ie(n=>[...n,r.toLowerCase()]),le(""),w("")}},$e=r=>{ie(n=>n.filter(u=>u!==r))},qe=async()=>{var r,n;if(w(""),!k.length){w("Ajoute au moins une adresse e-mail.");return}de(!0);try{const u=await ke();if(!u)throw new Error("R√©sultats indisponibles");const j=at({profile:t,results:u,benefits:D,priceLabel:S}).output("datauristring").split(",")[1],Me=`resultats-orientation-${U.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.pdf`,De={recipients:k,subject:`Voici les r√©sultats d'orientation de ${U}`,text:rt({firstName:U,benefits:D,price:S}),html:st({firstName:U,benefits:D,price:S}),attachment:{filename:Me,content:j}};await Ve.sendResults(De),v({tone:"success",text:"E-mail envoy√© ! Tu peux maintenant activer Z√©lia+."}),E("payment")}catch(u){console.error("Share results failed",u);const p=((n=(r=u.response)==null?void 0:r.data)==null?void 0:n.error)||u.message||"Impossible d‚Äôenvoyer les r√©sultats.";w(p)}finally{de(!1)}},Le=async()=>{A(""),v(null),R("processing");try{const{data:r}=await Y.createCheckout(),n=r==null?void 0:r.sessionId;if(!n)throw new Error("Missing session id");const u=X.current?await X.current:null;if(u){const{error:p}=await u.redirectToCheckout({sessionId:n});if(p){if(console.warn("Stripe redirect error",p),r!=null&&r.url){window.location.href=r.url;return}throw p}}else if(r!=null&&r.url)window.location.href=r.url;else throw new Error("Stripe non initialis√©")}catch(r){console.error("Checkout initiation failed",r),A("Impossible de lancer le paiement. Merci de r√©essayer dans quelques instants."),R("idle")}},pe=async()=>{te(!0),A("");try{await _e({minLevel:10,xpReward:Qe}),re(!0)}catch(r){console.error("Level up failed",r),A("Impossible de valider le niveau. R√©essaie dans un instant.")}finally{te(!1)}},xe=o.useMemo(()=>m&&(N==="dialogue"&&z?ge(m,{mouth:C?"happy08":"happy01"}):ge(m,{mouth:null})),[m,C,N,z]);if(l)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-2 border-black border-t-transparent"}),e.jsx("p",{className:"mt-2 text-text-secondary",children:"Chargement du niveau‚Ä¶"})]});const Re=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 md:flex-row md:items-start",children:[e.jsx("img",{src:xe||"/static/images/logo-dark.png",alt:"Avatar",className:"mx-auto h-48 w-48 rounded-3xl border border-gray-100 bg-white object-contain shadow-sm md:h-64 md:w-64"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative w-full rounded-2xl bg-black px-5 py-4 text-white md:px-6 md:py-5",children:[e.jsx("p",{className:"min-h-[3.5rem] whitespace-pre-wrap text-base leading-relaxed md:text-lg",children:Ce}),e.jsx("div",{className:"absolute -left-2 top-6 h-0 w-0 border-b-8 border-r-8 border-t-8 border-b-transparent border-r-black border-t-transparent"})]}),e.jsx("button",{type:"button",onClick:Ie,className:"mt-4 inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d]",children:L===q.length-1?"Compris !":"Suivant"})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 text-sm shadow-card md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ce qu‚Äôon va faire juste avant le paiement"}),e.jsx("p",{className:"mt-3 text-gray-600",children:"Tu viens d‚Äôatteindre un jalon cl√©. Avant d‚Äôactiver Z√©lia+, on t‚Äôaide √† partager tes r√©ussites aupr√®s des personnes qui peuvent valider ton acc√®s (parents, tuteur, r√©f√©rent √©ducatif‚Ä¶)."}),e.jsx("p",{className:"mt-3 text-gray-600",children:"√Ä la fin du dialogue, tu pourras saisir leurs e-mails pour leur transmettre ton dossier complet (M√©tiers, Personnalit√©, Comp√©tences) en PDF."}),e.jsx("p",{className:"mt-3 text-gray-600",children:"Ensuite seulement, tu activeras Z√©lia+ et acc√©deras aux niveaux 11 √† 50 avec toutes les fonctionnalit√©s premium."})]})]})}),Te=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 md:flex-row md:items-start",children:[e.jsx("img",{src:xe||"/static/images/logo-dark.png",alt:"Avatar",className:"mx-auto h-48 w-48 rounded-3xl border border-gray-100 bg-white object-contain shadow-sm md:h-64 md:w-64"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative w-full rounded-2xl bg-black px-5 py-4 text-white md:px-6 md:py-5",children:[e.jsx("p",{className:"min-h-[3.5rem] whitespace-pre-wrap text-base leading-relaxed md:text-lg",children:"Ins√®re les e-mails des personnes qui peuvent te donner acc√®s √† Z√©lia+. On leur envoie ton dossier en PDF."}),e.jsx("div",{className:"absolute -left-2 top-6 h-0 w-0 border-b-8 border-r-8 border-t-8 border-b-transparent border-r-black border-t-transparent"})]}),e.jsxs("div",{className:"mt-4 rounded-2xl border border-dashed border-gray-300 bg-gray-50 p-4 text-sm text-gray-600",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Contenu du dossier :"}),e.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-5",children:[e.jsx("li",{children:"R√©sultats M√©tiers, Personnalit√©, Comp√©tences (format MPC)"}),e.jsx("li",{children:"Recommandations personnalis√©es et prochaines √©tapes"}),e.jsx("li",{children:"Pr√©sentation de Z√©lia+ et de tout ce que tu vas d√©bloquer"})]})]})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Partager mes r√©sultats"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Entre les adresses e-mail des parents, tuteurs ou r√©f√©rents qui doivent valider ton acc√®s √† Z√©lia+."}),e.jsxs("div",{className:"mt-4 flex flex-col gap-3 sm:flex-row",children:[e.jsx("input",{type:"email",value:oe,onChange:r=>{le(r.target.value),W&&w("")},onKeyDown:r=>{r.key==="Enter"&&(r.preventDefault(),me())},placeholder:"parent@example.com",className:"w-full rounded-xl border border-gray-300 px-4 py-3 text-sm focus:border-black focus:outline-none focus:ring-2 focus:ring-black/10"}),e.jsx("button",{type:"button",onClick:me,className:"inline-flex items-center justify-center rounded-xl bg-black px-5 py-3 text-sm font-semibold text-white transition hover:bg-gray-900",children:"Ajouter"})]}),k.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:k.map(r=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-gray-900/10 px-3 py-1 text-sm text-gray-800",children:[r,e.jsx("button",{type:"button",onClick:()=>$e(r),className:"text-gray-500 transition hover:text-gray-800",children:"√ó"})]},r))}),ne&&e.jsx("div",{className:"mt-4 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-700",children:ne}),W&&e.jsx("div",{className:"mt-4 rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:W}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("button",{type:"button",onClick:qe,disabled:ce||K,className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:ce?"Envoi en cours‚Ä¶":"Envoyer mon dossier"}),e.jsx("button",{type:"button",onClick:()=>a("/app/activites"),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Retour aux activit√©s"})]}),e.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Nous utilisons uniquement ces e-mails pour envoyer le PDF r√©capitulatif de tes r√©sultats et pr√©senter Z√©lia+. Aucun compte ne sera cr√©√© sans leur accord."})]})]})}),Ze=()=>e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto grid max-w-5xl grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm font-semibold uppercase tracking-wider text-gray-500",children:[e.jsx("span",{className:"inline-flex h-6 min-w-[2rem] items-center justify-center rounded-full bg-black px-2 text-xs font-bold text-white",children:"Niv. 10"}),"Z√©lia+"]}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"Active Z√©lia+ pour d√©bloquer la suite"}),e.jsxs("p",{className:"text-lg text-gray-600",children:["Ce niveau d√©bloque toutes les ressources premium et les niveaux 11 √† 50. Un paiement unique de ",S," via Stripe te donne un acc√®s imm√©diat, en toute s√©curit√©."]})]}),B&&e.jsx("div",{className:`mt-4 rounded-2xl px-4 py-3 text-sm ${J[B.tone]||J.info}`,children:B.text}),ee&&e.jsx("div",{className:`mt-4 rounded-2xl px-4 py-3 text-sm ${J.error}`,children:ee}),!d&&e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-dashed border-gray-300 bg-gray-50 p-4 text-sm text-gray-600",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Ce que tu obtiens :"}),e.jsxs("ul",{className:"mt-2 list-disc space-y-1 pl-4",children:[e.jsx("li",{children:"Acc√®s imm√©diat aux niveaux 11 √† 50"}),e.jsx("li",{children:"Ateliers premium (CV, lettre, Parcoursup, oraux)"}),e.jsx("li",{children:"Support prioritaire et mises √† jour exclusives"})]}),e.jsxs("p",{className:"mt-3 text-sm text-gray-500",children:["Tarif : ",S," (paiement unique). Le r√©capitulatif complet est affich√© sur la page Stripe s√©curis√©e."]})]}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("button",{type:"button",onClick:Le,disabled:O!=="idle",className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:O==="processing"?"Redirection en cours‚Ä¶":O==="verifying"?"V√©rification‚Ä¶":`Activer Z√©lia+ ‚Äî ${S}`}),e.jsx("button",{type:"button",onClick:()=>a("/app/activites"),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Retour aux activit√©s"})]}),e.jsxs("p",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-400"}),"Paiement 100% s√©curis√© via Stripe. Les donn√©es bancaires ne transitent jamais par Z√©lia."]})]}),d&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("div",{className:"rounded-2xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700",children:"Bravo ! Z√©lia+ est actif. Tu peux maintenant valider ce niveau et poursuivre ton parcours."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("button",{type:"button",onClick:pe,disabled:T,className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:T?"Validation‚Ä¶":"Valider le niveau 10"}),e.jsx("button",{type:"button",onClick:()=>a("/app/activites"),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Retour aux activit√©s"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Une fois valid√©, tu pourras acc√©der directement au niveau 11 depuis la page Activit√©s."})]})]}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-card md:p-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ce que Z√©lia+ d√©bloque"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ton parcours devient complet et guid√© jusqu‚Äôaux derniers niveaux."}),e.jsx("ul",{className:"mt-6 space-y-3",children:D.map(r=>e.jsxs("li",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600",children:r.description})]},r.title))}),e.jsxs("div",{className:"mt-6 rounded-2xl border border-dashed border-gray-300 p-4 text-sm text-gray-500",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Besoin d‚Äôaide ?"}),e.jsxs("p",{className:"mt-1",children:["√âcris-nous via le chat ou par e-mail : ",e.jsx("a",{className:"font-medium text-gray-900 underline",href:"mailto:support@zelia.io",children:"support@zelia.io"}),"."]})]})]})]})});return e.jsxs(e.Fragment,{children:[N==="dialogue"&&Re(),N==="share"&&Te(),N==="payment"&&Ze(),Se&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",children:e.jsxs("div",{className:"relative w-full max-w-lg rounded-3xl border border-gray-200 bg-white p-8 text-center shadow-2xl",children:[e.jsx("button",{type:"button",onClick:()=>Z(!1),className:"absolute right-4 top-4 text-gray-400 transition hover:text-gray-600","aria-label":"Fermer l'animation",children:e.jsx("span",{className:"text-2xl",children:"√ó"})}),e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 flex h-12 w-12 items-center justify-center rounded-full bg-[#c1ff72] text-2xl shadow-lg animate-bounce",children:"üéâ"}),e.jsx("img",{src:m||"/assets/images/logo-dark.png",alt:"Avatar Z√©lia",className:"mx-auto mt-6 h-32 w-32 rounded-2xl border border-gray-100 bg-white object-contain shadow-md"}),e.jsx("h3",{className:"mt-6 text-2xl font-extrabold text-gray-900",children:"Merci pour le paiement !"}),e.jsx("p",{className:"mt-2 text-base text-gray-600",children:"Merci pour ta confiance, on va pouvoir passer au niveau 11 ensemble."}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center",children:[e.jsx("button",{type:"button",onClick:()=>{Z(!1),pe()},disabled:T,className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:T?"Validation‚Ä¶":"Valider le niveau 10"}),e.jsx("button",{type:"button",onClick:()=>Z(!1),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Plus tard"})]}),e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute left-6 top-8 h-2 w-2 animate-ping rounded-full bg-[#f68fff]"}),e.jsx("div",{className:"absolute right-8 top-10 h-2 w-2 animate-ping rounded-full bg-[#c1ff72]"}),e.jsx("div",{className:"absolute left-10 bottom-8 h-2 w-2 animate-ping rounded-full bg-[#8cd3ff]"}),e.jsx("div",{className:"absolute right-6 bottom-10 h-2 w-2 animate-ping rounded-full bg-[#f8c572]"})]})]})}),Ne&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",children:e.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-gray-200 bg-white p-8 text-center shadow-2xl",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 flex h-12 w-12 items-center justify-center rounded-full bg-[#c1ff72] text-2xl shadow-lg",children:"üöÄ"}),e.jsx("h3",{className:"mt-4 text-2xl font-extrabold text-gray-900",children:"Niveau 10 valid√© !"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Tu peux maintenant passer au niveau 11 et poursuivre ton parcours premium."}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center",children:[e.jsx("button",{type:"button",onClick:()=>a("/app/activites"),className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d]",children:"Voir mes activit√©s"}),e.jsx("button",{type:"button",onClick:()=>re(!1),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Rester ici"})]})]})})]})}export{ot as default};
