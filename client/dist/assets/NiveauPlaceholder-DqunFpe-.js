import{u as R,r as a,s as M,f as $,a as E,i as O,e as V,P as D,j as e,l as U}from"./index-ByTGM-fq.js";const B={locked:"bg-red-50 text-red-700 border-red-200",info:"bg-blue-50 text-blue-700 border-blue-200",success:"bg-emerald-50 text-emerald-700 border-emerald-200"};function F({level:t,xpReward:s=0,title:i,subtitle:n,description:o,tasks:x=[],comingSoon:y=!0,arcLabel:j}){const p=R(),[q,S]=a.useState(!0),[N,f]=a.useState(""),[c,h]=a.useState(""),[T,_]=a.useState(!1),[L,C]=a.useState(!1);a.useEffect(()=>{let r=!1;return(async()=>{var u;try{const{data:d}=await M.auth.getUser();if(!(d==null?void 0:d.user)){p("/login");return}const[m,l]=await Promise.all([$(),E.getProfile().catch(()=>null)]);if(r)return;const v=((u=l==null?void 0:l.data)==null?void 0:u.profile)||(l==null?void 0:l.data)||{},g=!!(v!=null&&v.has_paid);if(!O({targetLevel:t,progression:m,hasPaid:g})){const w=Number(m==null?void 0:m.level)||1,I=V({progression:m,hasPaid:g});t>D&&!g&&t>I?h("Ce niveau fait partie du contenu premium. Il sera accessible aprÃ¨s activation de l'abonnement ZÃ©lia+."):t>w+1?h(`Tu dois d'abord terminer le niveau ${w+1} pour dÃ©bloquer celui-ci.`):h(`Tu dois d'abord finaliser le niveau ${Math.max(1,t-1)}.`)}}catch(d){if(console.error("[NiveauTemplate] setup failed",d),r)return;f("Impossible de charger les informations de progression.")}finally{r||S(!1)}})(),()=>{r=!0}},[t,p]);const b=a.useMemo(()=>c?{tone:"locked",text:c}:y?{tone:"info",text:"Ce niveau est en prÃ©paration. Tes retours nous aideront Ã  le finaliser !"}:null,[y,c]);async function A(){if(!c){_(!0),f("");try{await U({minLevel:t,xpReward:s}),C(!0)}catch(r){console.error("[NiveauTemplate] levelUp failed",r),f("Impossible de valider le niveau pour le moment. RÃ©essaie dans un instant.")}finally{_(!1)}}}return q?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"inline-block w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-2 text-text-secondary",children:"Chargement du niveauâ€¦"})]}):e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl shadow-card p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col gap-2 mb-6",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 text-sm font-semibold uppercase tracking-wider text-gray-500",children:[e.jsxs("span",{className:"inline-flex h-6 min-w-[2rem] items-center justify-center rounded-full bg-black text-white text-xs font-bold",children:["Niv. ",t]}),j&&e.jsx("span",{children:j})]}),e.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-gray-900",children:i||`Niveau ${t}`}),n&&e.jsx("p",{className:"text-base text-gray-500",children:n}),o&&e.jsx("p",{className:"text-lg leading-relaxed text-gray-700 whitespace-pre-line",children:o})]}),b&&e.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm ${B[b.tone]}`,children:b.text}),N&&e.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:N}),Array.isArray(x)&&x.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Objectifs Ã  venir"}),e.jsx("ul",{className:"space-y-2",children:x.map((r,u)=>e.jsxs("li",{className:"flex items-start gap-3 rounded-2xl border border-gray-100 bg-gray-50 px-4 py-3",children:[e.jsx("span",{className:"mt-1 inline-flex h-6 w-6 flex-none items-center justify-center rounded-full bg-black text-xs font-bold text-white",children:u+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.title}),r.hint&&e.jsx("p",{className:"text-sm text-gray-500",children:r.hint})]})]},r.id||u))})]}),e.jsxs("div",{className:"mt-8 flex flex-col gap-3 sm:flex-row sm:items-center",children:[e.jsx("button",{type:"button",onClick:A,disabled:!!c||T,className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d] disabled:cursor-not-allowed disabled:opacity-60",children:T?"Enregistrementâ€¦":"Je valide ce niveau"}),e.jsx("button",{type:"button",onClick:()=>p("/app/activites"),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Retour aux activitÃ©s"}),e.jsx("div",{className:"text-sm text-gray-400 sm:ml-auto",children:s>0?`${s} XP`:"Gain d'XP Ã  confirmer"})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4",children:e.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-gray-200 bg-white p-8 text-center shadow-2xl",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 flex h-12 w-12 items-center justify-center rounded-full bg-[#c1ff72] text-2xl shadow-lg",children:"ðŸŽ‰"}),e.jsxs("h3",{className:"mt-4 text-2xl font-extrabold text-gray-900",children:["Niveau ",t," validÃ© !"]}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Ton avancÃ©e est prise en compte. Continue sur ta lancÃ©e pour dÃ©bloquer la suite du parcours."}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center",children:[e.jsx("button",{type:"button",onClick:()=>p("/app/activites"),className:"inline-flex items-center justify-center rounded-xl bg-[#c1ff72] px-5 py-3 text-base font-semibold text-black transition hover:bg-[#b3ff5d]",children:"Retour aux activitÃ©s"}),e.jsx("button",{type:"button",onClick:()=>C(!1),className:"inline-flex items-center justify-center rounded-xl border border-gray-200 px-5 py-3 text-base font-semibold text-gray-700 transition hover:bg-gray-100",children:"Rester sur la page"})]})]})})]})}const P=[{id:"interets_forces",min:6,max:10,title:"Approfondir tes forces",subtitle:"Consolidation des centres dâ€™intÃ©rÃªt et des motivations personnelles",description:"On continue Ã  explorer ce qui fait ta singularitÃ©. Les prochains ateliers t'aideront Ã  clarifier tes forces et les environnements oÃ¹ tu t'Ã©panouis vraiment.",label:"Forces & intÃ©rÃªts"},{id:"recherche_metiers",min:11,max:15,title:"Explorer des univers mÃ©tiers",subtitle:"DÃ©couvertes guidÃ©es pour confronter tes envies au terrain",description:"Place Ã  l'exploration concrÃ¨te : mÃ©tiers inspirants, Ã©tudes de cas et premiÃ¨res immersions virtuelles pour valider tes intuitions.",label:"Recherche mÃ©tiers"},{id:"immersions_rencontres",min:16,max:20,title:"Multiplier les rencontres",subtitle:"PrÃ©paration et capitalisation sur les Ã©changes professionnels",description:"On te met dans les meilleures conditions pour Ã©changer avec des pros, prÃ©parer tes questions et tirer le meilleur de chaque rencontre.",label:"Immersions & rencontres"},{id:"competences_soft_skills",min:21,max:25,title:"Valoriser tes compÃ©tences",subtitle:"Identifier, documenter et illustrer tes soft skills clÃ©s",description:"Tu vas apprendre Ã  mettre en lumiÃ¨re tes compÃ©tences comportementales et Ã  raconter tes expÃ©riences avec impact.",label:"CompÃ©tences & soft skills"},{id:"cv_lm",min:26,max:30,title:"Construire un dossier percutant",subtitle:"CV, lettre et pitch : les essentiels pour te dÃ©marquer",description:"On passe en mode production : modÃ¨les guidÃ©s, retours sur ton CV et rÃ©daction accompagnÃ©e pour ta lettre de motivation.",label:"CV & lettre"},{id:"parcoursup_preparation",min:31,max:35,title:"SÃ©curiser ton Parcoursup",subtitle:"StratÃ©gie de vÅ“ux et dossiers solidement argumentÃ©s",description:"Tu travailles ta stratÃ©gie Parcoursup, tu hiÃ©rarchises tes vÅ“ux et tu consolides chaque dossier.",label:"Parcoursup"},{id:"orals_pitch",min:36,max:40,title:"RÃ©ussir tes oraux",subtitle:"PrÃ©paration mentale, scÃ©narios guidÃ©s et feedbacks",description:"Simulations d'entretiens, pitchs chronomÃ©trÃ©s et exercices de confiance pour arriver serein(e) le jour J.",label:"Oraux & pitch"},{id:"dossiers_avances",min:41,max:45,title:"Polir chaque dÃ©tail",subtitle:"Audit complet de ton dossier et plan dâ€™action final",description:"On passe tout au crible : cohÃ©rence gÃ©nÃ©rale, storytelling, preuves. Tu termines avec un dossier prÃªt Ã  Ãªtre envoyÃ©.",label:"Dossier avancÃ©"},{id:"maitrise_finale",min:46,max:50,title:"Devenir mentor",subtitle:"Capitaliser sur ton parcours et transmettre",description:"Tu transformes ton expÃ©rience en expertise : accompagnement des autres, partage de tes apprentissages et vision long terme.",label:"MaÃ®trise finale"}],J={interets_forces:[{title:"Diagnostic approfondi de tes motivations",hint:"Tu identifies ce qui te donne de lâ€™Ã©nergie au quotidien et pourquoi."},{title:"Carte de tes environnements prÃ©fÃ©rÃ©s",hint:"Tu relies tes intÃ©rÃªts aux contextes scolaires ou pro qui te correspondent."},{title:"Journal des rÃ©ussites",hint:"Tu capitalises sur tes succÃ¨s pour nourrir ta confiance."}],recherche_metiers:[{title:"Veille mÃ©tiers ciblÃ©e",hint:"Tu dÃ©couvres 3 mÃ©tiers rÃ©alistes associÃ©s Ã  ton profil."},{title:"Interviews inspirantes",hint:"Tu prÃ©pares des questions pour rencontrer des pros du secteur."},{title:"Tableau de comparaison",hint:"Tu compares dÃ©bouchÃ©s, missions et formations associÃ©es."}],immersions_rencontres:[{title:"PrÃ©paration express aux rencontres",hint:"Tu rÃ©diges un pitch de prÃ©sentation et tes objectifs de rencontre."},{title:"Immersion guidÃ©e",hint:"Tu vis une simulation ou une immersion terrain commentÃ©e."},{title:"Retour dâ€™expÃ©rience structurÃ©",hint:"Tu capitalises sur chaque Ã©change avec une fiche synthÃ¨se."}],competences_soft_skills:[{title:"Inventaire de tes soft skills",hint:"Tu relies chaque compÃ©tence Ã  une situation vÃ©cue."},{title:"Storytelling des expÃ©riences",hint:"Tu apprends Ã  raconter un projet marquant avec la mÃ©thode STAR."},{title:"Plan de progression ciblÃ©",hint:"Tu dÃ©finis 2 axes dâ€™amÃ©lioration et ton plan dâ€™entraÃ®nement."}],cv_lm:[{title:"CV design et contenu",hint:"Tu construis un CV clair, lisible et orientÃ© impact."},{title:"Lettre de motivation guidÃ©e",hint:"Tu suis un canevas pas Ã  pas avec feedback instantanÃ©."},{title:"Ã‰laboration de ton pitch Ã©crit",hint:"Tu synthÃ©tises ton profil en quelques phrases convaincantes."}],parcoursup_preparation:[{title:"StratÃ©gie de vÅ“ux",hint:"Tu priorises et testes plusieurs scÃ©narios dâ€™admission."},{title:"Projet motivÃ© bÃ©ton",hint:"Tu rÃ©diges un projet motivÃ© personnalisÃ© et argumentÃ©."},{title:"Checklist administrative",hint:"Tu sÃ©curises chaque dossier avec un plan de contrÃ´le rapide."}],orals_pitch:[{title:"Simulation dâ€™entretien chronomÃ©trÃ©e",hint:"Tu tâ€™entraÃ®nes avec un retour dÃ©taillÃ© sur la posture et le fond."},{title:"DÃ©fi pitch 60 secondes",hint:"Tu apprends Ã  te prÃ©senter de faÃ§on percutante et mÃ©morable."},{title:"Gestion du stress et de la voix",hint:"Tu explores des techniques concrÃ¨tes pour Ãªtre Ã  lâ€™aise."}],dossiers_avances:[{title:"Audit intÃ©gral de ton dossier",hint:"Tu vÃ©rifies cohÃ©rence, preuves et diffÃ©renciation."},{title:"Plan dâ€™amÃ©lioration finale",hint:"Tu priorises les derniers ajustements Ã  rÃ©aliser."},{title:"Simulation dâ€™Ã©valuation jury",hint:"Tu testes ton dossier face Ã  des critÃ¨res exigeants."}],maitrise_finale:[{title:"Bilan rÃ©trospectif complet",hint:"Tu captures tout ce que tu as appris pendant le parcours."},{title:"Mentorat dâ€™un autre ZÃ©lia",hint:"Tu partages ton expÃ©rience pour accompagner un nouvel Ã©lÃ¨ve."},{title:"Vision long terme",hint:"Tu Ã©labores une feuille de route post-ZÃ©lia."}]};function k(t){const s=Number(t);return Number.isNaN(s)?6:Math.min(Math.max(s,6),50)}function X(t){return P.find(s=>t>=s.min&&t<=s.max)||P[0]}function Z(t){return 220+Math.max(0,t-6)*25}function G(t,s){return(J[t]||[]).map((n,o)=>({id:`${t}-${s}-${o+1}`,title:n.title,hint:n.hint}))}function z(t){const s=k(t),i=X(s),n=Z(s),o=G(i.id,s);return{level:s,xpReward:n,title:`Niveau ${s} â€” ${i.title}`,subtitle:i.subtitle,description:i.description,tasks:o,comingSoon:!0,arcLabel:i.label}}function H({level:t}){const s=k(t),i=a.useMemo(()=>z(s),[s]);return e.jsx(F,{...i})}export{H as N};
